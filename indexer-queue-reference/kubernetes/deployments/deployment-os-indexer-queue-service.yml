apiVersion: v1
data:
  AUTHORIZE_API: https://os-entitlements-gcp-jvmvia5dea-uc.a.run.app/entitlements/v1
  LEGALTAG_API: 35.193.27.80:80
  STORAGE_HOSTNAME: 34.71.59.229:80
  MONGO_DB_URL: 34.69.26.15:27017
  MONGO_DB_USER: admin
  MONGO_DB_NAME: main
  reference.env.prefix: ic-r2-dev
  INDEXER_URL: os-indexer-dot-osdu-cicd-epam.uc.r.appspot.com
  #INDEXER_QUEUE_HOST: https://os-indexer-queue-dot-osdu-cicd-epam.uc.r.appspot.com/_dps/task-handlers/enqueue
  GOOGLE_AUDIENCES: 56174004264-dodcad3iura0u27vggknioojp2cuvtat.apps.googleusercontent.com
  CRS_API: https://crs-converter-jvmvia5dea-uc.a.run.app/api/crs/v1
  GOOGLE_CLOUD_PROJECT: osdu-anthos-02
kind: ConfigMap
metadata:
  labels:
    app: indexer-queue-reference
  name: indexer-queue-config
  namespace: default
---
apiVersion: apps/v1
kind: Deployment
metadata:
  generateName: indexer-queue-reference-anthos
  labels:
    app: indexer-queue-reference
  name: indexer-queue-reference
  namespace: default
spec:
  selector:
    matchLabels:
      app: indexer-queue-reference
  replicas: 1
  template:
    metadata:
      labels:
        app: indexer-queue-reference
    spec:
      containers:
        -   env:
              -   name: AUTHORIZE_API
                  valueFrom:
                    configMapKeyRef:
                      key: AUTHORIZE_API
                      name: indexer-queue-config
              -   name: LEGALTAG_API
                  valueFrom:
                    configMapKeyRef:
                      key: LEGALTAG_API
                      name: indexer-queue-config
              -   name: STORAGE_HOSTNAME
                  valueFrom:
                    configMapKeyRef:
                      key: STORAGE_HOSTNAME
                      name: indexer-queue-config
              -   name: MONGO_DB_URL
                  valueFrom:
                    configMapKeyRef:
                      key: MONGO_DB_URL
                      name: indexer-queue-config
              -   name: MONGO_DB_USER
                  valueFrom:
                    configMapKeyRef:
                      key: MONGO_DB_USER
                      name: indexer-queue-config
              -   name: MONGO_DB_PASSWORD
                  valueFrom:
                    secretKeyRef:
                      name: indexer-queue-secret
                      key: mongo.db.password
              -   name: MONGO_DB_NAME
                  valueFrom:
                    configMapKeyRef:
                      key: MONGO_DB_NAME
                      name: indexer-queue-config
              -   name: reference.rabbitmq.uri
                  valueFrom:
                    secretKeyRef:
                      name: indexer-queue-secret
                      key: reference.rabbitmq.uri
              -   name: INDEXER_URL
                  valueFrom:
                    configMapKeyRef:
                      key: INDEXER_URL
                      name: indexer-queue-config
              -   name: GOOGLE_AUDIENCES
                  valueFrom:
                    configMapKeyRef:
                      key: GOOGLE_AUDIENCES
                      name: indexer-queue-config
              -   name: CRS_API
                  valueFrom:
                    configMapKeyRef:
                      key: CRS_API
                      name: indexer-queue-config
              -   name: GOOGLE_CLOUD_PROJECT
                  valueFrom:
                    configMapKeyRef:
                      key: GOOGLE_CLOUD_PROJECT
                      name: indexer-queue-config
            image: us.gcr.io/osdu-anthos-02/os-indexer-queue/anthos-indexer-queue-reference:10b3d8b-dirty
            name: indexer-queue-reference
---
apiVersion: v1
kind: Service
metadata:
  name: indexer-queue-reference
  namespace: default
spec:
  ports:
    -   protocol: TCP
        port: 80
        targetPort: 8080
  selector:
    app: indexer-queue-reference
  type: LoadBalancer
---
apiVersion: v1
data:
  mongo.db.password: YWRtaW4xMjM=
  reference.rabbitmq.uri: YW1xcDovL2FkbWluOm9zZHVwYXNzQDM1LjE5My4yNS44OTo1Njcy
kind: Secret
metadata:
  name: indexer-queue-secret
  namespace: default
type: Opaque