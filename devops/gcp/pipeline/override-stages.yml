variables:
  OSDU_GCP_SERVICE: indexer-queue
  OSDU_GCP_VENDOR: gcp-cloudrun
  BUILD_PATH: "$OSDU_GCP_SERVICE-$OSDU_GCP_VENDOR/cloudbuild/Dockerfile.cloudbuild"
  GC_HELM_SETS: >- 
    --set data.cloudTaskTargetHost=$OSDU_GCP_CLOUD_TASK_TARGET_HOST 
    --set data.indexerQueueIdentifier=$OSDU_GCP_INDEXER_QUEUE_CLOUDTASK_NAME
  # FIXME remove when all services are migrated to a single helm
  OSDU_GCP_ENABLE_HELM_CONFIG: "false"

osdu-gcp-test:
  extends:
    - .maven
    - .osdu-gcp-variables
  stage: integration
  needs: ["osdu-gcp-deploy-deployment"]
  allow_failure: true
  script:
    - echo "This is a stub. Integration tests are not implemented for the Indexer-Queue service."
    - exit 1

osdu-gcp-dev2-test:
  extends:
    - .maven
    - .osdu-gcp-dev2-variables
  stage: integration
  needs: ["osdu-gcp-dev2-deploy-deployment"]
  allow_failure: true
  script:
    - echo "This is a stub. Integration tests are not implemented for the Indexer-Queue service."
    - exit 1

osdu-gcp-anthos-test:
  allow_failure: true
  script:
    - echo "This is a stub. The service doesn't support the step."
    - exit 1
