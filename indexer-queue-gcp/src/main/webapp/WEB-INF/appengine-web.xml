<?xml version="1.0" encoding="UTF-8"?>
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
    <runtime>java8</runtime>
    <threadsafe>true</threadsafe>
    <service>os-indexer-queue</service>
    <instance-class>F4_1G</instance-class>
    <automatic-scaling>
        <min-idle-instances>2</min-idle-instances>
        <max-idle-instances>automatic</max-idle-instances>
        <min-pending-latency>30ms</min-pending-latency>
        <max-pending-latency>automatic</max-pending-latency>
        <max-concurrent-requests>60</max-concurrent-requests>
    </automatic-scaling>

    <system-properties>
        <property name="java.util.logging.config.file" value="WEB-INF/logging.properties"/>
        <property name="spring.profiles.active" value="ENVIRONMENT" />
    </system-properties>

    <!-- CAUTION: enable-jar-classes does NOT work with JAX-RS swagger, DON'T use it even-though mvn appengine:deploy keep suggesting it.-->

    <env-variables>
        <env-var name="JETTY_MODULES_ENABLE" value="gzip"/>
        <env-var name="ENTITLEMENT_TARGET_AUDIENCE" value="INDEXER_AUDIENCES"/>
    </env-variables>
</appengine-web-app>